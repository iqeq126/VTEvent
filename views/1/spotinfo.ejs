<!doctype html>
<html lang="ko">
<head>
    <meta charset="utf-8">
    <meta name="referrer" content="no-referrer" />
    <meta http-equiv='Content-Type' content='text/html'>
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="viewport" content="width=device-width, initial-scale=1">


    <link href="https://fonts.googleapis.com/css2?family=Jua&display=swap" rel="stylesheet">

    <style>
        body {
            font-size: 1rem;
            font-weight: 200;
            font-family: 'Jua', sans-serif;
            text-align: center;
            background-size:cover;
            background-position:50%;
        }
        .spot-class00{
            line-height: 120%;
        }
        a {
            color: #00b7ff;
        }

        @media (min-width: 200px) {
            #spot-id03 img{
                height: 120px;
                max-width: 100%;
            }
            body{
                font-size: 0.8rem;
            }
            .BigFont{
                font-size: 1.8rem;
            }
            .game_submit{
                align-items: center;
                margin-top: 0%;
                width: 80%;
                margin-left: 10%;
                margin-right: 10%;
            }
            .game_submit input{
                width: 80%;
                height: 3rem;
                border: 0;
                outline: none;
                border-radius: 4rem;
                background: linear-gradient(to left, rgb(102, 44, 238), rgb(102, 44, 238));
                color: white;
                font-size: 1.2rem;
                letter-spacing: 0.2rem;
            }
        }
        @media (min-width: 600px) {
            #spot-id03 img{
                height: 200px;
                max-width: 100%
            }
            .BigFont{
                font-size: 3rem;
            }
            .game_submit{
                align-items: center;
                margin-top: 0%;
                width: 70%;
                margin-left: 15%;
                margin-right: 15%;
            }
            .game_submit input{
                width: 70%;
                height: 4rem;
                border: 0;
                outline: none;
                border-radius: 4rem;
                background: linear-gradient(to left, rgb(102, 44, 238), rgb(102, 44, 238));
                color: white;
                font-size: 1.5rem;
                letter-spacing: 0.2rem;
            }
        }
        @media (min-width: 1024px) {
            #spot-id03 img{
                height: 300px;
                max-width: 90%
            }
            body{
                font-size: 0.9rem;
            }
            .BigFont{
                font-size: 4rem;
            }.game_submit{
                 align-items: center;
                 margin-top: 0%;
                 width: 60%;
                 margin-left: 20%;
                 margin-right: 20%;
             }
            .game_submit input{
                width: 60%;
                height: 5rem;
                border: 0;
                outline: none;
                border-radius: 4rem;
                background: linear-gradient(to left, rgb(102, 44, 238), rgb(102, 44, 238));
                color: white;
                font-size: 2rem;
                letter-spacing: 0.2rem;
            }
        }
        .swiper-pagination{
            position: relative !important;
        }
        .swiper-slide, .swiper-wrapper{
            display: block;
        }
        .swiper-container{
            overflow: hidden;
            position: relative;
        }
        /* 말풍선 적절한 top 과 margin-left 로 위치조정 */
        .arrow_box {
            display: none;
            text-align: center;
            position: relative;
            float: right;
            width: 14rem;
            padding: 0.8rem;
            -webkit-border-radius: 0.8rem;
            -moz-border-radius: 0.8rem;
            border-radius: 0.8rem;
            background: #333;
            color: #fff;
            font-size: 1.5rem;
        }
        /*
        .arrow_box:after {
            position: absolute;
            left: 100%;
            bottom: 85%;
            width: 0;
            height: 0;
            border: solid transparent;
            border-color: rgba(51, 51, 51, 0);
            border-left-color: #333;
            border-width: 1rem;
            pointer-events: none;
            content: '';
        }*/
        input[type="checkbox"]:checked + body{
            width: calc(100% + 14rem);
        }
        input[type="checkbox"]+label {
            float: right;
            display: inline-flex;
            align-items: center;
            width: 2rem;
            height: 2rem;
            background: url('https://cdn3.iconfinder.com/data/icons/google-material-design-icons/48/ic_help_48px-512.png') no-repeat 0 0 / contain;
        }

        input[type='checkbox']:checked+label {
            display: inline-block;
            float: right;
            width: 2rem;
            height: 2rem;
            background: url('https://cdn0.iconfinder.com/data/icons/interface-3-4/100/Close-256.png') no-repeat 0 0 / contain;
        }

        input[type='checkbox']:checked + label + .arrow_box {
            display: inline-block;
            float: right;
            text-align: center;
        }
        input[type="checkbox"] {
            display: none;
        }

    </style>
    <link rel="stylesheet" href="https://unpkg.com/swiper/swiper-bundle.min.css?after"/>
    <script src="https://unpkg.com/swiper/swiper-bundle.min.js?after"></script>


    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/sweetalert2@11.4.10/dist/sweetalert2.min.css">
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11.4.10/dist/sweetalert2.min.js"></script>
    <script src="http://code.jquery.com/jquery-2.2.1.min.js"></script>

    <script>

        function VisitAndGoods(){
            let myColor = document.getElementById('gameAlert');
            let IsVisit = document.getElementById("visit_confirm");
            let IsGoods = document.getElementById("goods_confirm");
            if('<%=is_exists_user_info === 1 ? ( already_assigned_goods > 0 ? 1 : 0) : 0%>' === '1') {
                IsGoods.innerHTML = "이미 수령한 장소입니다.\n";
                // 예외 처리
                myColor.style.background = 'gray';
                myColor.disabled = 'disabled';
            }
            else {
                IsGoods.innerHTML = "이곳에서 상품을 수령하지 않았습니다.\n";
            }
            if('<%=is_exists_user_info === 1 ? ( already_visit > 0 ? 1: 0) : 0%>' === '1')
                IsVisit.innerHTML = "방문 여부 : O";
            else {
                IsVisit.innerHTML = "방문 여부 : X";
            }
        }

        $(document).ready(function(){
            $('#game').click(function(){   //submit 버튼을 클릭하였을 때
                let sendData = "spot_info="+'spot1';   //폼의 이름 값을 변수 안에 담아줌
                $.ajax({
                    type:'post',   //post 방식으로 전송
                    url:'/dogame',   //데이터를 주고받을 파일 주소
                    data: sendData,
                    dataType:'html',   //html 파일 형식으로 값을 담아온다.
                    success : function(data){   //파일 주고받기가 성공했을 경우. data 변수 안에 값을 담아온다.
                        $('#spot-id02').html(data);  //현재 화면 위 id="message" 영역 안에 data안에 담긴 html 코드를 넣어준다.
                    }
                });
            });
        });

        function swapDiv() {
            let result = [0, 1, -1, -2, -3, -4];
            let myColor = document.getElementById('gameAlert');
            // swiper 제거하기
            let elm = document.getElementById('spot-id02');

            /*
            if(elm.style.display !== 'none'){
                elm.style.display = 'none';
                myColor.style.background = 'gray';
                myColor.disabled = 'disabled';
            } else {
                elm.style.display = 'block';
                myColor.style.background = 'linear-gradient(to left, rgb(102, 44, 238), rgb(102, 44, 238))';
            }*/
        }

        // 상품 수령 개수
        function duplication_confirm(){
           let myId = document.getElementById('goodsId');
            if ('<%=duplicate_goods_count%>' === '1'){
                myId.innerHTML = '<b style="color:#E74C3C;  font-weight: 300;">상품은 한 번만</b> 받을 수 있습니다.';
            }
            else{
                myId.innerHTML = '';
            }
        }
        // sweatAlert2 가지고 놀아보기
        function myAlert(){
            Swal.fire({
                title: '<b style="color:#E74C3C;">상품</b> 수령은 단 <b style="color:#E74C3C;">한 번</b>!',
                text: '게임은 여러 번 가능합니다!',
                showCancelButton: true,
                imageUrl: 'https://cdn0.iconfinder.com/data/icons/small-n-flat/24/678132-gift-256.png',
                imageWidth: 200,
                imageHeight: 200,
                imageAlt: 'Custom image',
                confirmButtonColor: '#3085d6',
                confirmButtonText: '확인',
            }).then((result) => {
                if (result.value) {

                }
            })
        }



       function myGame(){

        }
    </script>
</head>

<body class="fade">
<div class="div_center" style="position: relative; width: 100%;">
        <div style="text-align: right; position: absolute; top: 0; right: 0;">
            <input type="checkbox" id="myCheck">
            <label for="myCheck"></label>
            <p class="arrow_box" style="font-weight: 200;">1. 게임하기 버튼을<br>누르면 시작됩니다<br>2. 상품 정보는<br>슬라이드로 제공됩니다<br><br>감사합니다!</p>
        </div>
        <div class="spot-class00">
            <h2 style="margin-top: 0;"> 여기는 ! <%=spot_title%></h2>
            <!--<img src=  <%=spot_image%> >-->
            <h3 class="BigFont" style="font-weight: 200;"> 이벤트 이름 <%=event_title%> </h3>
            <h3 style="font-weight: 200;">일정 <%= start_date %> ~ <%=end_date%> </h3>
            <h3 id = 'goodsId' style="font-weight: 200;" class="goods_count"><script>duplication_confirm();</script></h3>
            <div id='game' class = "game_submit" style="margin-top: 0;">
                <%if(is_exists_user_info === 1) { %>
                    <!--<h3>↓↓↓↓여긴 개인정보가 있을 때 나타나는 영역↓↓↓↓</h3>-->
                    <h3 id="goods_confirm" style="font-weight: 200;"><script>VisitAndGoods();</script></h3>
                    <h3 id="visit_confirm" style="font-weight: 200;"><script>VisitAndGoods();</script></h3>
                    <!--<h3>↑↑↑↑여긴 개인정보가 있을 때 나타나는 영역↑↑↑↑</h3>-->
                <%}%>
                <input id="gameAlert" class="gameAlert" type="submit" value="게임하기" style="font-family: 'Jua', sans-serif;" onclick="swapDiv(); myGame();">
            </div>
            <!--<progress min="0" max="1" value="0"  style="width: 100%;"> </progress>-->
            <div id="spot-id02" class="swiper-container">
                <div id="spot-id03" class="swiper-wrapper">
                <% data_list.forEach(function(list) { %>
                    <div class="swiper-slide">
                        <h3 style="font-weight: 200;">상품명: <%-list.goods_title%> </h3>
                        <img src= <%-list.goods_image%> />
                        <h3 style="font-weight: 200;">상품 현황 <%-list.assigned_goods%> / <%-list.goods_total_count%> </h3>
                    </div>
                <% }) %>
                </div>
                <div class="swiper-pagination"></div>
            </div>
            <div id="spot-id04" class="" >

            </div>
        <hr>
        <img src="images/image01.png" style="width: 9rem; height: 3rem;" />
        </div>
</div>
<script>
    const swiper = new Swiper('.swiper-container', {
        //기본 셋팅
        //방향 셋팅 vertical 수직, horizontal 수평 설정이 없으면 수평
        direction: 'horizontal',
        //한번에 보여지는 페이지 숫자
        slidesPerView: 1,
        //페이지와 페이지 사이의 간격
        spaceBetween: 30,
        //드레그 기능 true 사용가능 false 사용불가
        debugger: true,
        //마우스 휠기능 true 사용가능 false 사용불가
        mousewheel: true,
        //반복 기능 true 사용가능 false 사용불가
        loop: true,
        //선택된 슬라이드를 중심으로 true 사용가능 false 사용불가 djqt
        centeredSlides: true,
        // 페이지 전환효과 slidesPerView효과와 같이 사용 불가
        // effect: 'fade',
        observer: true,
        observeParents: true,

        //자동 스크를링
        autoplay: {
            //시간 1000 이 1초
            delay: 2500,
            disableOnInteraction: false,
        },

        //페이징
        pagination: {
            //페이지 기능
            el: '.swiper-pagination',
            //클릭 가능여부
            clickable: true,
        },

        //방향표
        navigation: {
            //다음페이지 설정
            nextEl: '.swiper-button-next',
            //이전페이지 설정
            prevEl: '.swiper-button-prev',
        },

    });
</script>
</body>
<!--
$("#admin-signup-phonenumber-box .btnChk").click(function () {
        var phone = $('#admin-signup-phonenumber-box input[type=text]').val();
        phone = phone.replace(/-/gi, '');
        if (phone.length < 10 || phone.length > 11) {
            $('#regist-checkup').text('휴대폰 번호를 확인해주세요.');
            alert($('#regist-checkup').text());
        }  else {
            var url = "/certification";
            var params = "phone=" + phone;

            $.ajax({
                type: "POST",
                url: url,
                data: params,
                success: function (args) {
                    if (args['is_success']) {
                        $('#regist-checkup').text('인증번호가 전송되었습니다.');
                        alert($('#regist-checkup').text());
                        $("#admin-signup-user-name").attr("readonly",false).attr("disabled",false);
                        $("#signup-user-mobile-phone-number").attr("readonly",false).attr("disabled",false);
                        $("#signup-user-unique-number").attr("readonly",false).attr("disabled",false);
                    } else {
                        $('#regist-checkup').text(args['error_message']);
                        //alert($('#regist-checkup').text());
                        debugAjaxReceviedError("certification", args['error_message']);
                    }
                },
                error: function (request,status,error) {
                    alert("ajax response error \ncode:"+request.status+"\n"+"message:"+request.responseText+"\n"+"error:"+error);
                }
            });
        }

    });
-->
</html>